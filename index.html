<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-11-01 Tue 20:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>dvolk.github.io</title>
<meta name="author" content="Denis Volk" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="static/oolook/oolook.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
<script src="static/oolook/jquery-3.x-git.min.js"></script>
<script src="static/oolook/oolook.js"></script>
<link rel="icon" type="image/png" href="favicon.png">
<style>.figure-number { display: none; }</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">dvolk.github.io</h1>

<div id="outline-container-org7d35195" class="outline-2">
<h2 id="org7d35195">This page</h2>
<div class="outline-text-2" id="text-org7d35195">
<p>
This page is a port from my old static site generator (which I called bloggen.py) to the org-mode theme <a href="https://dvolk.github.io/oolook">Oolook</a>.
</p>

<p>
This content was last updated 2016. Keep that in mind as you gaze into the abyss.
</p>
</div>
</div>


<div id="outline-container-orgd6b3a82" class="outline-2">
<h2 id="orgd6b3a82">A Quick Look at Haskell</h2>
<div class="outline-text-2" id="text-orgd6b3a82">
<p>
2014-05-01
</p>
</div>

<div id="outline-container-orgdbcd350" class="outline-3">
<h3 id="orgdbcd350">Environment</h3>
<div class="outline-text-3" id="text-orgdbcd350">
<p>
Haskell is defined in the <a href="https://www.haskell.org/onlinereport/haskell2010/">Haskell Report</a>.
</p>

<p>
The most used compiler is <a href="https://www.haskell.org/ghc/download">GHC</a> (debian package <code>ghc</code>, <code>ghc-doc</code>).
</p>

<p>
Haskell projects are typically built and packaged using <a href="https://www.haskell.org/cabal/">Cabal</a> (<code>cabal-install</code>).
</p>

<p>
There is an online package repository called <a href="https://hackage.haskell.org/">Hackage</a>.
</p>
</div>
</div>

<div id="outline-container-orga2f9166" class="outline-3">
<h3 id="orga2f9166">Types</h3>
<div class="outline-text-3" id="text-orga2f9166">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #C1CAFF;">"Hello "</span> <span style="color: #FF84C9;">++</span> <span style="color: #C1CAFF;">" World"</span>
</pre>
</div>

<p>
is an <b>expression</b>. Its <b>value</b> is
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #C1CAFF;">"Hello World"</span>
</pre>
</div>

<p>
Its <b>type</b> is
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">String</span>
</pre>
</div>

<p>
Types are declared using the reserved operator <code>::</code> (read as "has type")
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">xs</span> <span style="color: #FF84C9;">=</span> <span style="color: #C1CAFF;">"Hello World"</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span>
</pre>
</div>

<p>
Here <code>xs</code> is a <b>variable</b>.
</p>

<p>
Variables and types names are  case sensitive. Variable names begin with
a lowercase character and type names begin with an uppercase character.
</p>

<p>
Type declarations  are optional.  In their  absence, Haskell  will infer
the types. If it can't, you'll be asked to provide them.
</p>
</div>
</div>

<div id="outline-container-orga0abbeb" class="outline-3">
<h3 id="orga0abbeb">Functions</h3>
<div class="outline-text-3" id="text-orga0abbeb">
<p>
Defining and calling functions is very simple
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">addTwoLengths</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">addTwoLengths</span> xs ys <span style="color: #FF84C9;">=</span> length xs <span style="color: #FF84C9;">+</span> length ys
</pre>
</div>

<p>
A function can be defined for different arguments (the order in which
the definitions are written is important)
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">fac</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">fac</span> 1 <span style="color: #FF84C9;">=</span> 1
<span style="color: #84B5FF;">fac</span> n <span style="color: #FF84C9;">=</span> n <span style="color: #FF84C9;">*</span> fac <span style="color: #66D9EF;">(</span>n <span style="color: #FF84C9;">-</span> 1<span style="color: #66D9EF;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org667da3f" class="outline-4">
<h4 id="org667da3f">Let</h4>
<div class="outline-text-4" id="text-org667da3f">
<p>
We can define local variables with <code>let</code> &#x2026; <code>in</code> &#x2026;
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">squaredDistance</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">squaredDistance</span> x1 y1 x2 y2 <span style="color: #FF84C9;">=</span>
  <span style="color: #66D9EF;">let</span> dx <span style="color: #FF84C9;">=</span> x1 <span style="color: #FF84C9;">-</span> x2
      dy <span style="color: #FF84C9;">=</span> y1 <span style="color: #FF84C9;">-</span> y2
  <span style="color: #66D9EF;">in</span> dx <span style="color: #FF84C9;">^</span> 2 <span style="color: #FF84C9;">+</span> dy <span style="color: #FF84C9;">^</span> 2
</pre>
</div>
</div>
</div>

<div id="outline-container-org1592f16" class="outline-4">
<h4 id="org1592f16">Partial application</h4>
<div class="outline-text-4" id="text-org1592f16">
<p>
A function can be partially applied, creating a new function
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">sdFrom11</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">sdFrom11</span> <span style="color: #FF84C9;">=</span> squaredDistance 1 1

<span style="color: #84B5FF;">sdFrom11</span> 4 4 <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org560813c" class="outline-4">
<h4 id="org560813c">Composition</h4>
<div class="outline-text-4" id="text-org560813c">
<p>
Two functions can be composed, creating a new function
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">f</span> <span style="color: #FF84C9;">=</span> fac <span style="color: #FF84C9;">.</span> length <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
</pre>
</div>

<p>
is the same as
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">f</span> n <span style="color: #FF84C9;">=</span> fac <span style="color: #66D9EF;">(</span>length n<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org349e2df" class="outline-4">
<h4 id="org349e2df">Anonymous functions</h4>
<div class="outline-text-4" id="text-org349e2df">
<p>
We can define an anonymous function (<b>lambda</b>) with <code>\args</code> <code>-&gt;</code> <code>body</code>
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">doubleLength</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">(</span><span style="color: #FF84C9;">\</span>n <span style="color: #FF84C9;">-&gt;</span> n <span style="color: #FF84C9;">*</span> 2<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">.</span> length
</pre>
</div>
</div>
</div>

<div id="outline-container-org68d8e76" class="outline-4">
<h4 id="org68d8e76">Higher-order functions</h4>
<div class="outline-text-4" id="text-org68d8e76">
<p>
It's  possible to  pass functions  as  arguments to  functions and  have
functions  return functions.
</p>

<p>
For example,  <code>map</code> transforms a  list by  applying a function  to every
element.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">map</span> <span style="color: #66D9EF;">(</span><span style="color: #FF84C9;">\</span>n <span style="color: #FF84C9;">-&gt;</span> n <span style="color: #FF84C9;">+</span> 1<span style="color: #66D9EF;">)</span> <span style="color: #66D9EF;">[</span>1,2,3<span style="color: #66D9EF;">]</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-haskell">        <span style="color: #FF84C9;">&#9484;-&lt;-&lt;-&lt;-&lt;-&lt;-&#9488;</span>
        <span style="color: #FF84C9;">|</span>           <span style="color: #FF84C9;">|</span>
        v           <span style="color: #FF84C9;">|</span>

<span style="color: #84B5FF;">map</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">(</span>a <span style="color: #FF84C9;">-&gt;</span> b<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">[</span>a<span style="color: #66D9EF;">]</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">[</span>b<span style="color: #66D9EF;">]</span>
       <span style="color: #FF84C9;">^^^^^^^^</span>    <span style="color: #FF84C9;">^^^</span>    <span style="color: #FF84C9;">^^^---</span> <span style="color: #66D9EF;">[</span>2,3,4<span style="color: #66D9EF;">]</span>
        <span style="color: #FF84C9;">|</span>           <span style="color: #FF84C9;">|</span>
        <span style="color: #FF84C9;">|</span>           <span style="color: #FF84C9;">&#9492;---</span> <span style="color: #66D9EF;">[</span>1,2,3<span style="color: #66D9EF;">]</span>
     <span style="color: #FF84C9;">\</span>n <span style="color: #FF84C9;">-&gt;</span> n <span style="color: #FF84C9;">+</span> 1
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf7b3520" class="outline-3">
<h3 id="orgf7b3520">Algebraic Data Types</h3>
<div class="outline-text-3" id="text-orgf7b3520">
</div>
<div id="outline-container-org06cc013" class="outline-4">
<h4 id="org06cc013">Sum types</h4>
<div class="outline-text-4" id="text-org06cc013">
<p>
The simplest example of a sum type is
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Bool</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">True</span>
          <span style="color: #FF84C9;">|</span> <span style="color: #66D9EF;">False</span>
</pre>
</div>

<p>
Bool value is either <code>True</code> or <code>False</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">x</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">True</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Bool</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc5f414d" class="outline-4">
<h4 id="orgc5f414d">Product types</h4>
<div class="outline-text-4" id="text-orgc5f414d">
<p>
A product type is defined as
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #66D9EF;">String</span> <span style="color: #66D9EF;">Int</span>
     <span style="color: #FF84C9;">^^^^^^</span>   <span style="color: #FF84C9;">^^^^^^</span> <span style="color: #FF84C9;">^^^^^^</span> <span style="color: #FF84C9;">^^^</span>
        <span style="color: #FF84C9;">|</span>        <span style="color: #FF84C9;">|</span>      <span style="color: #FF84C9;">|</span>     <span style="color: #FF84C9;">|</span>
        <span style="color: #FF84C9;">|</span>        <span style="color: #FF84C9;">|</span>      <span style="color: #FF84C9;">&#9492;-----&#9524;-----</span> <span style="color: #66D9EF;">data</span> constructor parameters
        <span style="color: #FF84C9;">|</span>        <span style="color: #FF84C9;">|</span>
        <span style="color: #FF84C9;">|</span>        <span style="color: #FF84C9;">&#9492;--</span> <span style="color: #66D9EF;">data</span> constructor
        <span style="color: #FF84C9;">|</span>
        <span style="color: #FF84C9;">&#9492;--</span> <span style="color: #66D9EF;">type</span> constructor
</pre>
</div>

<p>
The <code>Person</code> on the left side is the <b>type constructor</b>. The <code>Person</code> on
the right side  is the <b>data constructor</b>. These don't  have to have the
same  name,  but they  often  do,  to  the  chagrin of  Haskell  newbies
everywhere.
</p>

<p>
To create a value of type <code>Person</code>, use the <code>Person</code> data constructor:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">p</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Person</span>
<span style="color: #84B5FF;">p</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #C1CAFF;">"Morty"</span> 22
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafb6e4a" class="outline-4">
<h4 id="orgafb6e4a">Named data constructor parameters</h4>
<div class="outline-text-4" id="text-orgafb6e4a">
<p>
Data constructor parameters can be named
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span>
  <span style="color: #66D9EF;">{</span> name <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span>
  , age  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span>
  <span style="color: #66D9EF;">}</span>
</pre>
</div>

<p>
then an alternative way to create a <code>Person</code> is to write
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">p</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #66D9EF;">{</span> name <span style="color: #FF84C9;">=</span> <span style="color: #C1CAFF;">"Morthy"</span>
           , age  <span style="color: #FF84C9;">=</span> 22
           <span style="color: #66D9EF;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c31910" class="outline-4">
<h4 id="org7c31910">Type constructor parameters</h4>
<div class="outline-text-4" id="text-org7c31910">
<p>
Type constructors can have parameters
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Maybe</span> a <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Nothing</span>
             <span style="color: #FF84C9;">|</span> <span style="color: #66D9EF;">Just</span> a
</pre>
</div>

<p>
where <code>a</code> is a type.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">greeting</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Just</span> <span style="color: #C1CAFF;">"Hello"</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Maybe</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">name</span>     <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Nothing</span>      <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Maybe</span> <span style="color: #66D9EF;">String</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org456bfda" class="outline-4">
<h4 id="org456bfda">Compound example</h4>
<div class="outline-text-4" id="text-org456bfda">
<p>
For example, a ship may or may not have a captain
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Ship</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Ship</span>
  <span style="color: #66D9EF;">{</span> shipName <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span>
  , captain  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Maybe</span> <span style="color: #66D9EF;">Person</span>
  <span style="color: #66D9EF;">}</span>
</pre>
</div>

<p>
We can make a Ship with one
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">s1</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Ship</span> <span style="color: #66D9EF;">{</span> shipName <span style="color: #FF84C9;">=</span> <span style="color: #C1CAFF;">"Queen Elizabeth 2"</span>
         , captain <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Just</span> <span style="color: #A6E22E;">(</span> <span style="color: #66D9EF;">Person</span> <span style="color: #C1CAFF;">"William Cooper"</span> 50 <span style="color: #A6E22E;">)</span>
         <span style="color: #66D9EF;">}</span>
</pre>
</div>

<p>
And one without
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">s2</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Ship</span> <span style="color: #66D9EF;">{</span> shipName <span style="color: #FF84C9;">=</span> <span style="color: #C1CAFF;">"Dinghy"</span>
         , captain <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Nothing</span> <span style="color: #66D9EF;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6e52e30" class="outline-4">
<h4 id="org6e52e30">Data constructor parameter namespace</h4>
<div class="outline-text-4" id="text-org6e52e30">
<p>
In the above example, <code>Person</code> had  a <code>name</code> parameter, but <code>Ship</code> had a
<code>shipName</code> parameter. This is  because data constructor parameters share
one namespace and  cannot be reused in different data  types. And that's
because&#x2026;
</p>
</div>
</div>

<div id="outline-container-orgab898c5" class="outline-4">
<h4 id="orgab898c5">Data constructor named parameters are functions</h4>
<div class="outline-text-4" id="text-orgab898c5">
<p>
These are automatically generated for you
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">name</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">age</span>  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>

<span style="color: #84B5FF;">shipName</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Ship</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Maybe</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">captain</span>  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Ship</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Maybe</span> <span style="color: #66D9EF;">Person</span>
</pre>
</div>

<p>
Different functions (in the same module) can't have the same name.
</p>
</div>
</div>

<div id="outline-container-orgf13638a" class="outline-4">
<h4 id="orgf13638a">Updating values with named constructor parameters</h4>
<div class="outline-text-4" id="text-orgf13638a">
<p>
We can take an existing data  type with named constructor parameters and
update it. For example, to remove the captain from <code>s1</code> above
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">s3</span> <span style="color: #FF84C9;">=</span> s1 <span style="color: #66D9EF;">{</span> captain <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Nothing</span> <span style="color: #66D9EF;">}</span>
</pre>
</div>

<p>
This creates a new copy of <code>s1</code>, <code>s3</code>, changing the parameters supplied.
</p>
</div>
</div>

<div id="outline-container-orgac88723" class="outline-4">
<h4 id="orgac88723">Recursive data types</h4>
<div class="outline-text-4" id="text-orgac88723">
<p>
data type definitions can be recursive
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">List</span> a <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Nil</span>
            <span style="color: #FF84C9;">|</span> <span style="color: #66D9EF;">Append</span> a <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">List</span> a<span style="color: #66D9EF;">)</span>
</pre>
</div>

<p>
a <code>List</code> of <code>a</code> is then either <code>Nil</code> (empty list) or an element of type
<code>a</code> appended to a <code>List</code> of type <code>a</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">l</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">List</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">l</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Append</span> 1 <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Append</span> 2 <span style="color: #A6E22E;">(</span><span style="color: #66D9EF;">Append</span> 3 <span style="color: #FF84C9;">(</span><span style="color: #66D9EF;">Append</span> 4 <span style="color: #66D9EF;">Nil</span><span style="color: #FF84C9;">)</span><span style="color: #A6E22E;">)</span><span style="color: #66D9EF;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4b9f340" class="outline-3">
<h3 id="org4b9f340">Lists</h3>
<div class="outline-text-3" id="text-org4b9f340">
<p>
Lists are a  built-in recursive data type. They're  constructed with the
cons operator "<code>:</code>"
</p>

<div class="org-src-container">
<pre class="src src-haskell">1 <span style="color: #66D9EF;">:</span> <span style="color: #66D9EF;">(</span> 2 <span style="color: #66D9EF;">:</span> <span style="color: #A6E22E;">(</span> 3 <span style="color: #66D9EF;">:</span> <span style="color: #FF84C9;">(</span> 4 <span style="color: #66D9EF;">:</span> <span style="color: #AE81FF;">[]</span> <span style="color: #FF84C9;">)</span><span style="color: #A6E22E;">)</span><span style="color: #66D9EF;">)</span>
</pre>
</div>

<p>
Haskell provides an easier way to write the above
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">[</span>1, 2, 3, 4<span style="color: #66D9EF;">]</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">[</span><span style="color: #66D9EF;">Int</span><span style="color: #66D9EF;">]</span>
</pre>
</div>

<p>
A <code>String</code> is a list of <code>Char</code>
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">s</span> <span style="color: #FF84C9;">=</span> <span style="color: #C1CAFF;">"Hello World"</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">[</span><span style="color: #66D9EF;">Char</span><span style="color: #66D9EF;">]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org97414d6" class="outline-3">
<h3 id="org97414d6">Tuples</h3>
<div class="outline-text-3" id="text-org97414d6">
<p>
A tuple is a fixed size container. Unlike lists, a tuple may contain
different types
</p>

<p>
for example
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">(</span><span style="color: #C1CAFF;">"Proxima Centauri"</span>, 3, 4, 5<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">String</span>, <span style="color: #66D9EF;">Int</span>, <span style="color: #66D9EF;">Int</span>, <span style="color: #66D9EF;">Int</span><span style="color: #66D9EF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org433ad11" class="outline-3">
<h3 id="org433ad11">If and case</h3>
<div class="outline-text-3" id="text-org433ad11">
<p>
<code>if</code> &#x2026; <code>then</code> &#x2026; <code>else</code> &#x2026; is an expression. The <code>else</code> is mandatory
(what value would the expression evaluate to if it wasn't?)
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">describeIntSign</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">describeIntSign</span> n <span style="color: #FF84C9;">=</span>
  <span style="color: #66D9EF;">if</span> n <span style="color: #FF84C9;">&gt;</span> 0
    <span style="color: #66D9EF;">then</span> <span style="color: #C1CAFF;">"positive"</span>
    <span style="color: #66D9EF;">else</span> <span style="color: #C1CAFF;">"negative"</span>
</pre>
</div>

<p>
<code>case</code> &#x2026; <code>of</code> &#x2026;  is also an expression, but a  bit more general than
<code>if</code>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">describeInt</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">describeInt</span> n <span style="color: #FF84C9;">=</span>
  <span style="color: #66D9EF;">case</span> n <span style="color: #66D9EF;">of</span>
    0 <span style="color: #FF84C9;">-&gt;</span> <span style="color: #C1CAFF;">"zero"</span>
    1 <span style="color: #FF84C9;">-&gt;</span> <span style="color: #C1CAFF;">"one"</span>
    2 <span style="color: #FF84C9;">-&gt;</span> <span style="color: #C1CAFF;">"two"</span>
    <span style="color: #66D9EF;">_</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #C1CAFF;">"I don't know that number"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d9c71d" class="outline-3">
<h3 id="org1d9c71d">Deconstructing values</h3>
<div class="outline-text-3" id="text-org1d9c71d">
<p>
Data type values can be  deconstructed with pattern matching in function
arguments
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span>
  <span style="color: #66D9EF;">{</span> name <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Maybe</span> <span style="color: #66D9EF;">String</span>
  , age  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span>
  <span style="color: #66D9EF;">}</span>

<span style="color: #84B5FF;">nonsense</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">nonsense</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Person</span>  <span style="color: #66D9EF;">Nothing</span> a<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> a
<span style="color: #84B5FF;">nonsense</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Person</span> <span style="color: #A6E22E;">(</span><span style="color: #66D9EF;">Just</span> n<span style="color: #A6E22E;">)</span> a<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> length n <span style="color: #FF84C9;">+</span> a
</pre>
</div>

<p>
here  <code>n</code>  and <code>a</code>  will  be  locally bound  to  <code>name</code>  (when it  isn't
<code>Nothing</code>) and <code>age</code> of the person.
</p>

<p>
We can also pattern match in case expressions
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">case</span> p <span style="color: #66D9EF;">of</span>
  <span style="color: #66D9EF;">Person</span>  <span style="color: #66D9EF;">Nothing</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #C1CAFF;">"This person doesn't have a name"</span>
  <span style="color: #66D9EF;">Person</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Just</span> n<span style="color: #66D9EF;">)</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #C1CAFF;">"This person's name is "</span> <span style="color: #FF84C9;">++</span> n
</pre>
</div>

<p>
and let expressions
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">let</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Person</span> <span style="color: #66D9EF;">_</span> a<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> p <span style="color: #66D9EF;">in</span> a <span style="color: #FF84C9;">+</span> 1
</pre>
</div>

<p>
use <code>_</code> to indicate that you don't care about a parameter.
</p>

<p>
Lists and tuples can also be pattern matched.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">headIntList</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">[</span><span style="color: #66D9EF;">Int</span><span style="color: #66D9EF;">]</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
<span style="color: #84B5FF;">head</span> <span style="color: #66D9EF;">(</span>first<span style="color: #66D9EF;">:</span>rest<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> first
      <span style="color: #FF84C9;">^^^^^^^^^^</span>
          <span style="color: #FF84C9;">|</span>
 recall, a list is an element appended <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">:</span>'ed<span style="color: #66D9EF;">)</span> to the rest <span style="color: #66D9EF;">of</span> the list

<span style="color: #84B5FF;">swapPair</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Int</span>, <span style="color: #66D9EF;">Int</span><span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Int</span>, <span style="color: #66D9EF;">Int</span><span style="color: #66D9EF;">)</span>
<span style="color: #84B5FF;">swapPair</span> <span style="color: #66D9EF;">(</span>x, y<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">(</span>y, x<span style="color: #66D9EF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcddc501" class="outline-3">
<h3 id="orgcddc501">Parametric polymorphism</h3>
<div class="outline-text-3" id="text-orgcddc501">
<p>
Defining a new function for each type of list like above would be silly.
Haskell allows us to write generic/polymorphic functions.
</p>

<div class="org-src-container">
<pre class="src src-haskell">         <span style="color: #FF84C9;">&#9484;--</span> <span style="color: #66D9EF;">type</span> variables, a is any <span style="color: #66D9EF;">type</span>
         <span style="color: #FF84C9;">|</span>
         <span style="color: #FF84C9;">&#9500;-----&#9488;</span>
         <span style="color: #FF84C9;">|</span>     <span style="color: #FF84C9;">|</span>
         v     v
<span style="color: #84B5FF;">head</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">[</span>a<span style="color: #66D9EF;">]</span> <span style="color: #FF84C9;">-&gt;</span> a
<span style="color: #84B5FF;">head</span> <span style="color: #66D9EF;">(</span>first<span style="color: #66D9EF;">:</span>rest<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> first

<span style="color: #84B5FF;">swap</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">(</span>a, b<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">(</span>b, a<span style="color: #66D9EF;">)</span>
<span style="color: #84B5FF;">swap</span> <span style="color: #66D9EF;">(</span>a, b<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">(</span>b, a<span style="color: #66D9EF;">)</span>
</pre>
</div>

<p>
type variables are always lowercase.
</p>
</div>
</div>

<div id="outline-container-org9629f91" class="outline-3">
<h3 id="org9629f91">Typeclasses</h3>
<div class="outline-text-3" id="text-org9629f91">
<p>
Typeclasses allow you to overload functions
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">class</span> <span style="color: #66D9EF;">Eq</span> a <span style="color: #66D9EF;">where</span>
  <span style="color: #66D9EF;">(</span><span style="color: #FF84C9;">==</span><span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">::</span> a <span style="color: #FF84C9;">-&gt;</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Bool</span>
</pre>
</div>

<p>
types are instances of typeclasses
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">instance</span> <span style="color: #66D9EF;">Eq</span> <span style="color: #66D9EF;">Char</span> <span style="color: #66D9EF;">where</span>
  <span style="color: #66D9EF;">(</span><span style="color: #FF84C9;">==</span><span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">=</span> <span style="color: #FF84C9;">...</span>
</pre>
</div>
</div>

<div id="outline-container-org61b1665" class="outline-4">
<h4 id="org61b1665">Standard typeclasses</h4>
<div class="outline-text-4" id="text-org61b1665">
<p>
You can make your own, but Haskell already defines many typeclasses
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">typeclass</th>
<th scope="col" class="org-left">functions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Eq</td>
<td class="org-left"><code>(==)</code>, <code>(/=)</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Ord</td>
<td class="org-left"><code>(&lt;)</code>, <code>(&lt;=)</code>, <code>(&gt;=)</code>, <code>(&gt;)</code>, <code>max</code>, <code>min</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Enum</td>
<td class="org-left"><code>succ</code>, <code>pred</code>, <code>toEnum</code>, <code>fromEnum</code>, <code>enumFrom</code>, <code>enumFromThen</code>, <code>enumFromTo</code>, <code>enumFromThenTo</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Num</td>
<td class="org-left"><code>(+)</code>, <code>(-)</code>, <code>(⋆)</code>, <code>negate</code>, <code>abs</code>, <code>signum</code>, <code>fromInteger</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Real</td>
<td class="org-left"><code>toRational</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Integral</td>
<td class="org-left"><code>quot</code>, <code>rem</code>, <code>div</code>, <code>mod</code>, <code>quotRem</code>, <code>divMod</code>, <code>toInteger</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Fractional</td>
<td class="org-left"><code>(/)</code>, <code>recip</code>, <code>fromRational</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Floating</td>
<td class="org-left"><code>pi</code>, <code>exp</code>, <code>log</code>, <code>sqrt</code>, <code>(⋆⋆)</code>, <code>logBase</code>, <code>sin</code>, <code>cos</code>, <code>tan</code>, <code>asin</code>, <code>acos</code>, <code>atan</code>, <code>sinh</code>, <code>cosh</code>, <code>tanh</code>, <code>asinh</code>, <code>atanh</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">RealFrac</td>
<td class="org-left"><code>properFraction</code>, <code>truncate</code>, <code>round</code>, <code>ceiling</code>, <code>floor</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">RealFloat</td>
<td class="org-left"><code>floatRadix</code>, <code>floatDigits</code>, <code>floatRange</code>, <code>decodeFloat</code>, <code>encodeFloat</code>, <code>exponent</code>, <code>significand</code>, <code>scaleFloat</code>, <code>isNaN</code>, <code>isInfinite</code>, <code>isDenormalized</code>, <code>isIEEE</code>, <code>isNegativeZero</code>, <code>atan2</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Monad</td>
<td class="org-left"><code>(&gt;&gt;=)</code>, <code>(&gt;&gt;)</code>, <code>return</code>, <code>fail</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Functor</td>
<td class="org-left"><code>fmap</code></td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org181dbe4" class="outline-4">
<h4 id="org181dbe4">Automatic deriving</h4>
<div class="outline-text-4" id="text-org181dbe4">
<p>
Haskell can automatically derive some  typeclass instances for your data
types (restrictions may apply). E.g.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #66D9EF;">String</span> <span style="color: #66D9EF;">Int</span>
  <span style="color: #66D9EF;">deriving</span> <span style="color: #66D9EF;">Eq</span>

<span style="color: #84B5FF;">p1</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #C1CAFF;">"Rick"</span> 50

<span style="color: #84B5FF;">p2</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #C1CAFF;">"Morty"</span> 12

<span style="color: #84B5FF;">p1</span> <span style="color: #84B5FF;">==</span> p2 <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Bool</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org218c083" class="outline-4">
<h4 id="org218c083">Show &amp; Read</h4>
<div class="outline-text-4" id="text-org218c083">
<p>
<code>Show</code> and <code>Read</code> are two important typeclasses. They implement <code>show</code>
and <code>read</code> and can be automatically derived.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">show</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Show</span> a <span style="color: #FF84C9;">=&gt;</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">read</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Read</span> a <span style="color: #FF84C9;">=&gt;</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> a
</pre>
</div>

<p>
That is,  for types with a  <code>Show</code> instance, <code>show</code> will  turn the value
into a <code>String</code>. For types with  a <code>Read</code> instance, <code>read</code> will turn the
<code>String</code> into the value of type <code>a</code>
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">data</span> <span style="color: #66D9EF;">Person</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">Person</span> <span style="color: #66D9EF;">String</span> <span style="color: #66D9EF;">Int</span>
  <span style="color: #66D9EF;">deriving</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Eq</span>, <span style="color: #66D9EF;">Show</span>, <span style="color: #66D9EF;">Read</span><span style="color: #66D9EF;">)</span>

<span style="color: #84B5FF;">p1</span> <span style="color: #FF84C9;">=</span> read <span style="color: #C1CAFF;">"Person \"Rick\" 50"</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Person</span>

<span style="color: #84B5FF;">show</span> p1 <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span>
</pre>
</div>

<p>
You should not use <code>read</code> unless you know that the string is valid. An
invalid string will cause a runtime error.
</p>

<p>
for inputs that may fail to parse, use <code>readMaybe</code>
</p>

<div class="org-src-container">
<pre class="src src-haskell">Text<span style="color: #84B5FF;">.</span>Read.readMaybe <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Read</span> a <span style="color: #FF84C9;">=&gt;</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Maybe</span> a
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3742e8d" class="outline-3">
<h3 id="org3742e8d">IO</h3>
<div class="outline-text-3" id="text-org3742e8d">
</div>
<div id="outline-container-org54f4338" class="outline-4">
<h4 id="org54f4338">Example: Echoing input line</h4>
<div class="outline-text-4" id="text-org54f4338">
<p>
Understanding  how IO  works  in  Haskell requires  an  unusual amount  of
background knowledge compared to  other programming languages. It's best
to begin with an example.
</p>

<p>
Haskell executables begin with the main function.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
<span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">=</span> getLine <span style="color: #FF84C9;">&gt;&gt;=</span> putStrLn
</pre>
</div>

<p>
The types of these functions (often called <b>actions</b>) are
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">getLine</span>  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">String</span>
<span style="color: #84B5FF;">putStrLn</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">String</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
</pre>
</div>

<p>
<code>(&gt;&gt;=)</code> chains them together
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">(</span><span style="color: #84B5FF;">&gt;&gt;=</span><span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">IO</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">(</span>a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> b<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> b
         <span style="color: #FF84C9;">^^^^</span>    <span style="color: #FF84C9;">^^^^^^^^^^^</span>    <span style="color: #FF84C9;">^^^^</span>
          <span style="color: #FF84C9;">|</span>          <span style="color: #FF84C9;">|</span>          <span style="color: #FF84C9;">|</span>
getLine <span style="color: #84B5FF;">--&#9496;</span>          <span style="color: #FF84C9;">|</span>          <span style="color: #FF84C9;">|</span>
                     <span style="color: #FF84C9;">|</span>          <span style="color: #FF84C9;">&#9492;--</span> main
         putStrLn <span style="color: #FF84C9;">---&#9496;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8f60081" class="outline-4">
<h4 id="org8f60081">Example: Guess the number</h4>
<div class="outline-text-4" id="text-org8f60081">
<p>
What if  we want to chain  together two <code>IO a</code>  actions like <code>putStrLn</code>?
Replace the second one with a lambda that ignores its argument.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">putStrLn</span> <span style="color: #C1CAFF;">"Hello"</span>    <span style="color: #FF84C9;">&gt;&gt;=</span>    <span style="color: #FF84C9;">\</span><span style="color: #66D9EF;">_</span> <span style="color: #FF84C9;">-&gt;</span> putStrLn <span style="color: #C1CAFF;">"World"</span>
<span style="color: #FF84C9;">^^^^^^^^^^^^^^^^</span>           <span style="color: #FF84C9;">^^^^^^^^^^^^^^^^^^^^^^</span>
       <span style="color: #FF84C9;">|</span>                              <span style="color: #FF84C9;">|</span>
      <span style="color: #66D9EF;">IO</span> a                         a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> b
</pre>
</div>

<p>
We can make a "guess the number" game with these functions (and <code>randomRIO</code>)
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">import</span> <span style="color: #66D9EF;">Text.Read</span>
<span style="color: #66D9EF;">import</span> <span style="color: #66D9EF;">System.Random</span>

<span style="color: #84B5FF;">guessGame</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
<span style="color: #84B5FF;">guessGame</span> n <span style="color: #FF84C9;">=</span>
  putStrLn <span style="color: #C1CAFF;">"Guess the number (1-10): "</span> <span style="color: #FF84C9;">&gt;&gt;=</span> <span style="color: #FF84C9;">\</span><span style="color: #66D9EF;">_</span> <span style="color: #FF84C9;">-&gt;</span>
  getLine <span style="color: #FF84C9;">&gt;&gt;=</span> <span style="color: #FF84C9;">\</span>input <span style="color: #FF84C9;">-&gt;</span>
  <span style="color: #66D9EF;">case</span> readMaybe input <span style="color: #66D9EF;">of</span>
    <span style="color: #66D9EF;">Nothing</span>    <span style="color: #FF84C9;">-&gt;</span> putStrLn <span style="color: #C1CAFF;">"not sure what you just typed!"</span> <span style="color: #FF84C9;">&gt;&gt;=</span> <span style="color: #FF84C9;">\</span><span style="color: #66D9EF;">_</span> <span style="color: #FF84C9;">-&gt;</span>
                  guessGame n
    <span style="color: #66D9EF;">Just</span> guess <span style="color: #FF84C9;">-&gt;</span>
      <span style="color: #66D9EF;">if</span> guess <span style="color: #FF84C9;">==</span> n
        <span style="color: #66D9EF;">then</span> putStrLn <span style="color: #C1CAFF;">"You guessed it!"</span>
        <span style="color: #66D9EF;">else</span> putStrLn <span style="color: #C1CAFF;">"Wrong!"</span> <span style="color: #FF84C9;">&gt;&gt;=</span> <span style="color: #FF84C9;">\</span><span style="color: #66D9EF;">_</span> <span style="color: #FF84C9;">-&gt;</span>
             guessGame n

<span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
<span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">=</span> randomIO <span style="color: #66D9EF;">(</span>1,10<span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">&gt;&gt;=</span> guessGame
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4d0825" class="outline-4">
<h4 id="orga4d0825">Do notation</h4>
<div class="outline-text-4" id="text-orga4d0825">
<p>
Haskell provides a nicer notation of composing IO actions with <code>do</code> notation
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">import</span> <span style="color: #66D9EF;">Text.Read</span>
<span style="color: #66D9EF;">import</span> <span style="color: #66D9EF;">System.Random</span>

<span style="color: #84B5FF;">guessGame</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Int</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
<span style="color: #84B5FF;">guessGame</span> n <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">do</span>
  putStrLn <span style="color: #C1CAFF;">"Guess the number (1-10): "</span>
  input <span style="color: #FF84C9;">&lt;-</span> getLine
  <span style="color: #66D9EF;">case</span> readMaybe input <span style="color: #66D9EF;">of</span>
    <span style="color: #66D9EF;">Nothing</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">do</span> putStrLn <span style="color: #C1CAFF;">"not sure what you just typed!"</span>
                  guessGame n
    <span style="color: #66D9EF;">Just</span> guess <span style="color: #FF84C9;">-&gt;</span>
      <span style="color: #66D9EF;">if</span> guess <span style="color: #FF84C9;">==</span> n
        <span style="color: #66D9EF;">then</span> putStrLn <span style="color: #C1CAFF;">"You guessed it!"</span>
        <span style="color: #66D9EF;">else</span> <span style="color: #66D9EF;">do</span> putStrLn <span style="color: #C1CAFF;">"Wrong!"</span>
                guessGame n

<span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
<span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">do</span>
  n <span style="color: #FF84C9;">&lt;-</span> randomRIO <span style="color: #66D9EF;">(</span>1,10<span style="color: #66D9EF;">)</span>
  guessGame n
</pre>
</div>
</div>
</div>

<div id="outline-container-org237035d" class="outline-4">
<h4 id="org237035d">Looping</h4>
<div class="outline-text-4" id="text-org237035d">
<p>
We can loop with the monadic map <code>mapM_</code>
</p>

<div class="org-src-container">
<pre class="src src-haskell">                         <span style="color: #FF84C9;">&#9484;-&lt;-&lt;-&lt;-&lt;-&lt;-&lt;-&lt;-&#9488;</span>
                         <span style="color: #FF84C9;">|</span>               <span style="color: #FF84C9;">|</span>
                         v               <span style="color: #FF84C9;">|</span>

           map  <span style="color: #66D9EF;">M</span>  <span style="color: #66D9EF;">_</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">(</span>a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> <span style="color: #A6E22E;">()</span><span style="color: #66D9EF;">)</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">[</span>a<span style="color: #66D9EF;">]</span> <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>

                <span style="color: #FF84C9;">^</span>  <span style="color: #FF84C9;">^</span>    <span style="color: #FF84C9;">^^^^^^^^^^^^</span>    <span style="color: #FF84C9;">^^^</span>    <span style="color: #FF84C9;">^^^^^</span>
                <span style="color: #FF84C9;">|</span>  <span style="color: #FF84C9;">|</span>        <span style="color: #FF84C9;">|</span>            <span style="color: #FF84C9;">|</span>       <span style="color: #FF84C9;">|</span>
                <span style="color: #FF84C9;">|</span>  <span style="color: #FF84C9;">|</span>        <span style="color: #FF84C9;">&#9492;--</span> action   <span style="color: #FF84C9;">|</span>  no results returned
                <span style="color: #FF84C9;">|</span>  <span style="color: #FF84C9;">|</span>            to run   <span style="color: #FF84C9;">|</span>
<span style="color: #84B5FF;">works</span> on <span style="color: #66D9EF;">Monads</span> <span style="color: #FF84C9;">&#9496;</span>  <span style="color: #FF84C9;">|</span>                     <span style="color: #FF84C9;">|</span>
                   <span style="color: #FF84C9;">|</span>                     <span style="color: #FF84C9;">&#9492;--</span> list to run it on
  discards results <span style="color: #FF84C9;">&#9496;</span>

<span style="color: #FF84C9;">^^^^^^^^^^^^^^^^^^^^^</span>
  naming convention
</pre>
</div>

<p>
For example, to print the ASCII value of <code>Char</code> from A to Z
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">=</span> mapM_ <span style="color: #66D9EF;">(</span>print <span style="color: #FF84C9;">.</span> fromEnum<span style="color: #66D9EF;">)</span> <span style="color: #66D9EF;">[</span><span style="color: #C1CAFF;">'A'</span><span style="color: #FF84C9;">..</span><span style="color: #C1CAFF;">'Z'</span><span style="color: #66D9EF;">]</span>
</pre>
</div>

<p>
where
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">print</span>    <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Show</span> a <span style="color: #FF84C9;">=&gt;</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">()</span>
<span style="color: #84B5FF;">fromEnum</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Enum</span> a <span style="color: #FF84C9;">=&gt;</span> a <span style="color: #FF84C9;">-&gt;</span> <span style="color: #66D9EF;">Int</span>
</pre>
</div>

<p>
This  type of  looping  is  more limited  than  <code>for  (;;)</code> from  C-like
languages - you  cannot <code>break</code> out of  it for one. Instead  of having a
few general control  structures, Haskell has many  specialized ones, and
the ability to easily write your own.
</p>
</div>
</div>

<div id="outline-container-org06d11b0" class="outline-4">
<h4 id="org06d11b0">Concurrent IO</h4>
<div class="outline-text-4" id="text-org06d11b0">
<p>
Haskell comes with  light concurrency primitives. So light  in fact that
it might be better to use one  of the abstractions built on top of them,
like the <code>async</code> package:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #84B5FF;">async</span> <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">IO</span> a   <span style="color: #FF84C9;">-&gt;</span>   <span style="color: #66D9EF;">IO</span> <span style="color: #66D9EF;">(</span><span style="color: #66D9EF;">Async</span> a<span style="color: #66D9EF;">)</span>

         <span style="color: #FF84C9;">^^^^</span>        <span style="color: #FF84C9;">^^^^^^^^^^^^</span>
          <span style="color: #FF84C9;">|</span>               <span style="color: #FF84C9;">|</span>
 computation to run       v
                          <span style="color: #FF84C9;">|</span>
                          v
                          <span style="color: #FF84C9;">|</span>
            <span style="color: #FF84C9;">&#9484;--&lt;-&lt;-&lt;-&lt;-&lt;--&#9496;</span>
            v
            <span style="color: #FF84C9;">|</span>
            v
            <span style="color: #FF84C9;">|</span>
         vvvvvvv

<span style="color: #84B5FF;">wait</span>  <span style="color: #FF84C9;">::</span> <span style="color: #66D9EF;">Async</span> a   <span style="color: #FF84C9;">-&gt;</span>   <span style="color: #66D9EF;">IO</span> a

                        <span style="color: #FF84C9;">^^^^</span>
                         <span style="color: #FF84C9;">|</span>
               result <span style="color: #66D9EF;">of</span> computation
</pre>
</div>

<p>
For example  we can spawn  ten threads that do  some work, wait  for the
results and then print them.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #66D9EF;">import</span> <span style="color: #66D9EF;">Control.Concurrent</span>
<span style="color: #66D9EF;">import</span> <span style="color: #66D9EF;">Control.Concurrent.Async</span>

<span style="color: #84B5FF;">main</span> <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">do</span>
  <span style="color: #66D9EF;">let</span> worker n <span style="color: #FF84C9;">=</span> <span style="color: #66D9EF;">do</span>
        threadDelay <span style="color: #66D9EF;">(</span>10<span style="color: #FF84C9;">^</span>6<span style="color: #66D9EF;">)</span>
        return <span style="color: #66D9EF;">(</span>n <span style="color: #FF84C9;">*</span> 2<span style="color: #66D9EF;">)</span>

  ts <span style="color: #FF84C9;">&lt;-</span> mapM <span style="color: #66D9EF;">(</span>async <span style="color: #FF84C9;">.</span> worker<span style="color: #66D9EF;">)</span> <span style="color: #66D9EF;">[</span>1<span style="color: #FF84C9;">..</span>10<span style="color: #66D9EF;">]</span>

  results <span style="color: #FF84C9;">&lt;-</span> mapM wait ts

  mapM_ print results
</pre>
</div>

<p>
Note that <code>return</code> is  a function with type <code>a -&gt; IO a</code>.  It has no flow
control meaning  like in many  languages. It's simply turning  the <code>Int</code>
into an <code>IO Int</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-org797c13c" class="outline-3">
<h3 id="org797c13c">More</h3>
<div class="outline-text-3" id="text-org797c13c">
<ul class="org-ul">
<li><a href="https://www.haskell.org/tutorial/">https://www.haskell.org/tutorial/</a> - A  Gentle Introduction to Haskell,
Version 98 (slightly misleading title)</li>
<li><a href="https://www.haskell.org/ghc/docs/latest/html/libraries/index.html">https://www.haskell.org/ghc/docs/latest/html/libraries/index.html</a>    -
Documentation for the libraries that come with GHC</li>
<li><a href="http://book.realworldhaskell.org/">http://book.realworldhaskell.org/</a> - Real World Haskell</li>
<li><a href="http://community.haskell.org/~simonmar/pcph/">http://community.haskell.org/~simonmar/pcph/</a> - Parallel and Concurrent
Programming in Haskell</li>
<li><a href="https://en.wikibooks.org/wiki/Haskell">https://en.wikibooks.org/wiki/Haskell</a> Haskell Wikibook</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org8b587ff" class="outline-2">
<h2 id="org8b587ff">A guide to installing a custom, minimal(ish) GNU/Linux system</h2>
<div class="outline-text-2" id="text-org8b587ff">
<p>
2014-05-01
</p>
</div>

<div id="outline-container-org931340d" class="outline-3">
<h3 id="org931340d">Introduction</h3>
<div class="outline-text-3" id="text-org931340d">
<p>
Ubuntu is often believed to be bloated and slow, and users are recommended
to install other distributions like Arch Linux if they want to have a 'lean' system.
This belief is mistaken. Ubuntu can provide a very good mix of leanness and convenience.
</p>

<p>
This page is a beginner's guide on how to install and setup such a system. It's
based on my own preferences and notes.
</p>

<p>
I used 14.4 for testing to write this, but everything should
work with versions 12.4 and later. If it changes then I will
update it.
</p>
</div>
</div>

<div id="outline-container-org479a112" class="outline-3">
<h3 id="org479a112">Install</h3>
<div class="outline-text-3" id="text-org479a112">
</div>
<div id="outline-container-org21d96b5" class="outline-4">
<h4 id="org21d96b5">Picking the right installer</h4>
<div class="outline-text-4" id="text-org21d96b5">
<p>
Ubuntu media come in two forms: desktop and server. The desktop installer doesn't
offer many options. We'll be getting the server image from:
</p>

<ul class="org-ul">
<li><a href="http://www.ubuntu.com/download/server">http://www.ubuntu.com/download/server</a></li>
</ul>

<p>
I recommend getting the latest release. The system can be upgraded to a new release
fairly easily.
</p>
</div>
</div>

<div id="outline-container-org0afbffb" class="outline-4">
<h4 id="org0afbffb">Before Proceeding</h4>
<div class="outline-text-4" id="text-org0afbffb">
<p>
As always, backup important data and find some room for a new install. If you have
any kind of special setup not covered here (such as UEFI or PPPoE), you should
either read about it carefully before installation or have another Internet-capable
device nearby.
</p>
</div>
</div>

<div id="outline-container-orgaca1b2f" class="outline-4">
<h4 id="orgaca1b2f">Boot options</h4>
<div class="outline-text-4" id="text-orgaca1b2f">
<p>
Once you've booted the install media, you will have access to additional options
through the function keys F1-F6.
</p>

<p>
Some to consider are:
</p>

<ul class="org-ul">
<li><b>Expert mode</b> Enabling this gives more options in the installer. You shouldn't need most of the options, but one that's interesting is that you can choose to have a separate /home partition, or separate /home, /usr, /var, and /tmp partitions. Having separate partitions can sometimes be useful. On the other hand, it's annoying if you run out of space on one of them.</li>
<li><b>Install a minimal system</b> Enabling this will install a slightly smaller system (1.1G normally, 1G with 'minimal')</li>
<li><b>Free software only</b> If you enable this, the installer won't add the multiverse and restricted software repositories.</li>
</ul>

<p>
Select 'Install Ubuntu Server' and press enter to boot into the installer
</p>
</div>
</div>

<div id="outline-container-orgeca226e" class="outline-4">
<h4 id="orgeca226e">Some installation options</h4>
<div class="outline-text-4" id="text-orgeca226e">
<p>
The installer will ask you some simple questions.
</p>

<p>
After setting up a user, it will ask you if you want to encrypt the user(s) home
directories. The method used seems rather inconvenient. I recommend saying <b>no</b> here.
</p>

<p>
When partitioning disks, the installer will ask you what partitioning method to use.
I strongly recommend picking <b>encrypted LVM</b>. This will encrypt all partitions
except /boot.
</p>

<p>
The weakest part of the encryption will be your passphrase.
Read carefully and pick a good one.
</p>

<p>
The installer will ask you if you want automatic security updates. This is a
good idea and it's easy to toggle it later if you change your mind.
</p>

<p>
Next is the software selection. Leave everything unchecked unless you actually
want it.
</p>

<p>
The system will install and then reboot.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcd52e4a" class="outline-2">
<h2 id="orgcd52e4a">Post-install</h2>
<div class="outline-text-2" id="text-orgcd52e4a">
</div>
<div id="outline-container-org166b27f" class="outline-4">
<h4 id="org166b27f">Using tmux</h4>
<div class="outline-text-4" id="text-org166b27f">
<p>
Login as the user you created. Tmux is very useful for managing terminals.
It's already installed, all you need to do is, well&#x2026; run 'tmux'
</p>

<p>
If you've never used it before, Control-b ? (usually written as: C-b ?) will
bring up the keybindings.
</p>
</div>
</div>

<div id="outline-container-org2f4ef30" class="outline-4">
<h4 id="org2f4ef30">Firewall</h4>
<div class="outline-text-4" id="text-org2f4ef30">
<p>
It's not a bad idea to immediately enable the firewall:
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo ufw enable
sudo ufw default deny outgoing
sudo ufw allow out 80/tcp
sudo ufw allow out 443/tcp
sudo ufw allow out to &lt;DNS SERVER IP HERE&gt; port 53
</pre>
</div>

<p>
This will drop all incoming connections, and all outgoing connections except HTTP and HTTPS.
You should add rules here only as required.
</p>

<p>
If your dns server was set automatically through DHCP or PPPoE, you can
find it with
</p>

<div class="org-src-container">
<pre class="src src-bash">cat /etc/resolv.conf
</pre>
</div>
</div>
</div>

<div id="outline-container-org381cafd" class="outline-4">
<h4 id="org381cafd">Setting apt defaults</h4>
<div class="outline-text-4" id="text-org381cafd">
<p>
open /etc/apt/apt.conf for editing
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install zile
sudo zile /etc/apt/apt.conf
</pre>
</div>

<p>
and add
</p>

<pre class="example">
APT::Install-Recommends "0";
APT::Install-Suggests "0";
</pre>

<p>
This will make apt-get <span class="underline">not</span> consider recommended and suggested packages as dependencies.
It will still print what it recommends installing every time you install a package through apt-get, so
you'll need to consider what you actually need.
</p>
</div>
</div>

<div id="outline-container-orgff22e08" class="outline-4">
<h4 id="orgff22e08">Updating</h4>
<div class="outline-text-4" id="text-orgff22e08">
<p>
The packages that came on the install media are probably outdated. It's important
to update to the latest
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get update
sudo apt-get dist-upgrade
</pre>
</div>

<p>
It's not a bad idea to reboot after this.
</p>
</div>
</div>

<div id="outline-container-org0a40970" class="outline-4">
<h4 id="org0a40970">World un-readable</h4>
<div class="outline-text-4" id="text-org0a40970">
<p>
By default, anyone can read files that users create. This is for compatibility with services
like HTTP servers, but if you're not using those it's possible to slightly increase security
by making your files accessible to you.
</p>

<p>
First we need make sure only you have access to your home directory
</p>

<div class="org-src-container">
<pre class="src src-bash">chmod -R go-rwx ~
</pre>
</div>

<p>
Then open ~/.bashrc and put
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #A6E22E;">umask</span> 077
</pre>
</div>

<p>
at the end. This makes it so newly created files can't be accessed by other users.
</p>
</div>
</div>

<div id="outline-container-org21b1535" class="outline-4">
<h4 id="org21b1535">Tracking /etc</h4>
<div class="outline-text-4" id="text-org21b1535">
<p>
It's a good idea to keep track of what happens in /etc. etckeeper is a wrapper
around version control systems that does this
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install etckeeper git
</pre>
</div>

<p>
etckeeper assumes you're using the bazaar VCS, but I chose git because it's
what I know best. We need to uncomment git by removing the #
</p>

<pre class="example">
VCS="git"
</pre>

<p>
in /etc/etckeeper/etckeeper.conf
</p>

<p>
and also comment out the other one with
</p>

<pre class="example">
#VCS="bzr"
</pre>

<p>
Had you installed bzr, it would have initialized etckeeper automatically, but
on other VCS you have to do it yourself
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo etckeeper init
</pre>
</div>

<p>
etckeeper will auto-add and commit everything in /etc every time you add or remove packages
through apt-get. Let's try it out by installing a fancy git tool!
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install tig
</pre>
</div>

<p>
now you can run
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #A6E22E;">cd</span> etc; sudo tig
</pre>
</div>

<p>
to browse changes in /etc
</p>
</div>
</div>

<div id="outline-container-orgeb8172c" class="outline-4">
<h4 id="orgeb8172c">X.Org</h4>
<div class="outline-text-4" id="text-orgeb8172c">
<p>
It's time to install X.Org
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install xserver-xorg xinit i3 rxvt-unicode
</pre>
</div>

<p>
open ~/.xinitrc and add
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #66D9EF;">exec</span> i3
</pre>
</div>

<p>
Now start it:
</p>

<div class="org-src-container">
<pre class="src src-bash">xinit -- -nolisten tcp
</pre>
</div>

<p>
Setting up X was painful for a long time. Every time I do this and it just works I
feel like I'm living in the future.
</p>

<p>
This should start up X.Org with the i3 window manager. After you accept the default settings
you should have blank screen.
</p>

<p>
Press WinKey-Enter twice (usually written as: M-return, M for meta) to open two terminals.
Then press M-S-down (S = shift) arrow to rearrange the terminal layout
</p>

<p>
If you haven't used i3 before, read the man page for more keybindings and then experiment.
It's a very useful window manager.
</p>

<p>
The statusbar just displays which workspace we're on which isn't very useful and wastes space.
Let's comment it out in at the end of ~/.i3/config:
</p>

<pre class="example">
#bar {
#        status_command i3status
#}
</pre>

<p>
Since we're there let's also add another keybinding:
</p>

<pre class="example">
bindsym $mod+b border toggle
</pre>

<p>
Now if you reload i3 by pressing M-S-r the statusbar should disappear.
</p>

<p>
Pressing M-b will toggle the decorations for the focused window, which is useful for saving screen space.
</p>
</div>
</div>

<div id="outline-container-org7e7fddf" class="outline-4">
<h4 id="org7e7fddf">ranger &amp; ncdu</h4>
<div class="outline-text-4" id="text-org7e7fddf">
<p>
While using bash and coreutils is fine, at some point you'll probably want a more
specialized interface for managing files. Once such interface is ranger:
</p>

<p>
ncdu is a ncurses interface to du - disk usage utility. It makes it very easy
to see what's eating up disk space.
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install ranger ncdu
</pre>
</div>

<p>
Press ? to load the man page.
</p>
</div>
</div>

<div id="outline-container-org8f22ab9" class="outline-4">
<h4 id="org8f22ab9">Firefox</h4>
<div class="outline-text-4" id="text-org8f22ab9">
<p>
Let's install Firefox
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install firefox
</pre>
</div>

<p>
The firefox package comes with an AppArmor profile, so let's take care of that before starting firefox
for the first time
</p>
</div>
</div>

<div id="outline-container-orgd47ce0f" class="outline-4">
<h4 id="orgd47ce0f">AppArmor</h4>
<div class="outline-text-4" id="text-orgd47ce0f">
<p>
Normally, an application running with a user id is able to do anything the user can do.
AppArmor is a Linux kernel module that additionally restricts programs. An AppArmor profile
for a program lists all files and capabilities that the program is allowed to use. Anything
not on the list is denied and logged. For example, it's possible to restrict a PDF reader
to only be able to read files with the .pdf extension, and deny write and network access
altogether (for some reason this is an exercise left to the reader however).
AppArmor implements so-called Mandatory Access Controls. It's not the most
sophisticated MAC framework, but it is probably the most convenient to use.
</p>

<p>
Ubuntu comes with AppArmor enabled, all we need to do is install extra profiles and
turn the profiles to enforcing mode.
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install apparmor-profiles apparmor-utils
<span style="color: #A6E22E;">cd</span> /etc/apparmor.d/
sudo find . -maxdepth 1 -type f -exec aa-enforce <span style="color: #C1CAFF;">'{}'</span> <span style="color: #C1CAFF;">\;</span>
</pre>
</div>

<p>
You can check that the profiles are enforced by running
</p>

<div class="org-src-container">
<pre class="src src-bash">aa-status
</pre>
</div>
</div>
</div>

<div id="outline-container-org2b5736a" class="outline-4">
<h4 id="org2b5736a">More Firefox</h4>
<div class="outline-text-4" id="text-org2b5736a">
<p>
Now that we've enabled the AA profile for firefox, it's time to start and configure it
</p>

<p>
Press M-2 to switch to the second workspace, press M-d to bring up dmenu, type in firefox and press
enter to run it.
</p>

<p>
Open the preferences and press M-w to switch to a tabbed layout.
</p>

<p>
Type in about:blank as your home page.
</p>

<p>
We can take some simple precautions to help avoid being tracked by corporations and agencies
on the web:
</p>

<p>
On the privacy tab, select 'custom settings for history', then set 'accept third-party
cookies' to never and 'keep until' to 'I close firefox'. Check 'clear history when
firefox closes', click settings and check all the options except 'saved passwords'.
Uncheck the two 'Remember&#x2026;' options above.
</p>

<p>
Since we're here. Go to advanced - data choices and uncheck the health and crash reporters.
</p>

<p>
One of the best things about firefox is how many addons there are for it. Here are some I
recommend
</p>

<ul class="org-ul">
<li>Tree Style Tabs <a href="https://addons.mozilla.org/en-US/firefox/addon/tree-style-tab/">https://addons.mozilla.org/en-US/firefox/addon/tree-style-tab/</a></li>
<li>Noscript <a href="https://addons.mozilla.org/en-US/firefox/addon/noscript/">https://addons.mozilla.org/en-US/firefox/addon/noscript/</a></li>
<li>Adblock Plus <a href="https://addons.mozilla.org/en-US/firefox/addon/adblock-plus/">https://addons.mozilla.org/en-US/firefox/addon/adblock-plus/</a></li>
<li>Requestpolicy <a href="https://addons.mozilla.org/en-US/firefox/addon/requestpolicy/">https://addons.mozilla.org/en-US/firefox/addon/requestpolicy/</a></li>
<li>Refcontrol <a href="https://addons.mozilla.org/en-US/firefox/addon/refcontrol/">https://addons.mozilla.org/en-US/firefox/addon/refcontrol/</a></li>
<li>HTTPS everywhere <a href="https://www.eff.org/https-everywhere">https://www.eff.org/https-everywhere</a></li>
</ul>

<p>
These are only the most basic tweaks. Firefox is a beast.
</p>
</div>
</div>

<div id="outline-container-org764b628" class="outline-4">
<h4 id="org764b628">Youtube sans flash</h4>
<div class="outline-text-4" id="text-org764b628">
<p>
Youtube is entertaining and sometimes even useful. Browser plugins on the other hand
are a terrible idea and HTML5 doesn't always work. Fortunately there's a way around these
problems
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install mplayer youtube-dl
</pre>
</div>

<p>
We can now download and play videos:
</p>

<div class="org-src-container">
<pre class="src src-bash">youtube-dl -f 18 http://www.youtube.com/watch?<span style="color: #FF84C9;">v</span>=UdfY25gDjK8
mplayer Richard<span style="color: #C1CAFF;">\ </span>Stallman<span style="color: #C1CAFF;">\ </span>signs<span style="color: #C1CAFF;">\ </span>my<span style="color: #C1CAFF;">\ </span>laptop<span style="color: #C1CAFF;">\ </span>and<span style="color: #C1CAFF;">\ </span>removes<span style="color: #C1CAFF;">\ </span>Windows<span style="color: #C1CAFF;">\ </span>8<span style="color: #C1CAFF;">\ </span>license-UdfY25gDjK8.mp4
</pre>
</div>

<p>
It used to be possible to play videos directly without saving them by using
youtube-dl -g, but google now returns HTTPS URLs and mplayer only understands HTTP.
</p>

<p>
Despite the name, youtube-dl supports quite a few video sites.
</p>
</div>
</div>

<div id="outline-container-orgc0088e1" class="outline-4">
<h4 id="orgc0088e1">GTK2 appearance</h4>
<div class="outline-text-4" id="text-orgc0088e1">
<p>
The default look of GTK is not the best. The easiest way to change it is to install and run
lxappearance.
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install lxappearance gtk2-engines
lxappearnace
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb695a3" class="outline-4">
<h4 id="orgfb695a3">apt-file</h4>
<div class="outline-text-4" id="text-orgfb695a3">
<p>
It's often useful to know which package a file came from. apt-file is a tool for searching files in packages.
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install apt-file
sudo apt-file update
</pre>
</div>

<p>
As a test we can look for packages that come with AppArmor profiles:
</p>

<div class="org-src-container">
<pre class="src src-bash">apt-file search <span style="color: #C1CAFF;">'/etc/apparmor.d'</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga9fb312" class="outline-4">
<h4 id="orga9fb312">Other software</h4>
<div class="outline-text-4" id="text-orga9fb312">
<p>
Some recommendations
</p>

<ul class="org-ul">
<li><b>lyx</b> a WYSIWYG editor that exports to LaTeX (and so PDF, DVI). For writing everything from letters to books. Especially useful for anything science-y</li>
<li><b>emacs</b> an editor that's also a web browser, video editor, spreadsheet, IRC and mail client,&#x2026;</li>
<li><b>gimp</b> raster graphics editor</li>
<li><b>audacity</b> audio editor</li>
<li><b>ffmpeg</b> very capable command-line video/audio editor</li>
<li><b>irssi</b> IRC client</li>
<li><b>zathura</b> PDF viewer</li>
<li><b>djview4</b> DJVU viewer</li>
<li><b>mutt</b> IMAP/SMTP email client</li>
<li><b>feh</b> miniaml image viewer</li>
<li><b>rtorrent</b> minimal torrent client</li>
</ul>
</div>
</div>

<div id="outline-container-orgbe136bd" class="outline-3">
<h3 id="orgbe136bd">grsecurity</h3>
<div class="outline-text-3" id="text-orgbe136bd">
</div>
<div id="outline-container-org02256c4" class="outline-4">
<h4 id="org02256c4">Why and how</h4>
<div class="outline-text-4" id="text-org02256c4">
<p>
grsecurity is a patch for the linux kernel that provides many additional security features including
its own MAC framework. It is not part of the kernel (at the moment) so it has to be installed manually.
</p>

<p>
Is it necessary? Good question. But building a kernel is fun and you should do it at least once.
</p>
</div>
</div>

<div id="outline-container-org528a97a" class="outline-4">
<h4 id="org528a97a">Building the Linux kernel</h4>
<div class="outline-text-4" id="text-org528a97a">
<p>
We'll need some tools
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo apt-get install build-essential libncurses5-dev gcc-4.8-plugin-dev
mkdir ~/src
<span style="color: #A6E22E;">cd</span> ~/src
</pre>
</div>

<p>
go to
</p>

<p>
<a href="https://www.kernel.org/">https://www.kernel.org/</a>
</p>

<p>
and download the latest kernel source. Grab the matching grsecurity patch and gradm from
</p>

<p>
<a href="https://grsecurity.net/download.php">https://grsecurity.net/download.php</a>
</p>

<p>
Download the key and signatures, and let's verify the downloads:
</p>

<div class="org-src-container">
<pre class="src src-bash">gpg --import spender-gpg-key.asc
gpg --verify grsecurity*.patch.sig grsecurity*.patch
gpg --verify gradm*.tar.gz.sig gradm*.tar.gz
</pre>
</div>

<p>
and the Linux kernel source too (keyservers live on port 11371):
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo ufw allow out 11371/tcp
gpg --recv-keys 6092693E
xz -cd linux-*.tar.xz | gpg --verify linux-*.tar.sign -
</pre>
</div>

<p>
gpg will complain that the keys aren't trusted. But that is a tricky affair.
</p>

<div class="org-src-container">
<pre class="src src-bash">tar xf linux*.tar.gz
<span style="color: #A6E22E;">cd</span> linux*
patch -p1 &lt; ../grsecurity*.patch
make menuconfig
</pre>
</div>

<p>
At this point you will get menu system with many options and you should look over them carefully.
Since we've patched with grsecurity, you should enable it in Security Options, or it's all for naught.
Prominent options you may want to disable are various hotplugging features and IA32 emulation.
</p>

<p>
Once you're done, it's time to build the kernel
</p>

<div class="org-src-container">
<pre class="src src-bash">make deb-pkg
</pre>
</div>

<p>
If you have more than one core, you can parallelize the build process with -jN, e.g.:
</p>

<div class="org-src-container">
<pre class="src src-bash">make -j8 deb-pkg
</pre>
</div>

<p>
Once it's done, you'll have fresh kernel packages. Install them with
</p>

<div class="org-src-container">
<pre class="src src-bash">dpkg -i *.deb
</pre>
</div>

<p>
Reboot and select the new kernel on the boot loader.
</p>
</div>
</div>

<div id="outline-container-org9ae7f57" class="outline-4">
<h4 id="org9ae7f57">It doesn't work</h4>
<div class="outline-text-4" id="text-org9ae7f57">
<p>
Your system didn't boot, or perhaps the keyboard isn't responding, or your sound card isn't detected.
That's OK. It might take a couple of iterations to get everything working the first time. Try again.
</p>
</div>
</div>
</div>
</div>




<div id="outline-container-orgaf4b61c" class="outline-2">
<h2 id="orgaf4b61c">Orbiter Space Flight Simulator on GNU/Linux HOW-TO</h2>
<div class="outline-text-2" id="text-orgaf4b61c">
<p>
2014-04-15
</p>
</div>

<div id="outline-container-org3885d2c" class="outline-3">
<h3 id="org3885d2c">Introduction</h3>
<div class="outline-text-3" id="text-org3885d2c">

<div id="org1e7568f" class="figure">
<p><img src="images/wine-1353780989.png" alt="wine-1353780989.png" />
</p>
<p><span class="figure-number">Figure 1: </span>Docking with the ISS</p>
</div>

<p>
Orbiter (<a href="https://en.wikipedia.org/wiki/Orbiter_(simulator)">https://en.wikipedia.org/wiki/Orbiter_(simulator)</a>) runs
surprisingly well on GNU/Linux (from now on: Linux). Since the
developer doesn't appear to be particularly interested in making
Orbiter cross-platform, it is necessary to use the Wine compatibility
layer (<a href="http://www.winehq.org/">http://www.winehq.org/</a>). This guide assumes that you have not
used Linux before, but are interested in doing so for the purpose of,
among other things, running Orbiter on it. It is probably impossible
for this guide to be "complete" for everyone - it all depends on how
comfortable you are with computers. If you're having trouble with some
step, you're encouraged to use Google, ask in the Linux4Noobs subreddit
(<a href="http://www.reddit.com/r/linux4noobs">http://www.reddit.com/r/linux4noobs</a>), or email me.
</p>

<p>
Written on 2012-11-24. Updated 2014-04-15.
</p>
</div>
</div>

<div id="outline-container-orge107e14" class="outline-3">
<h3 id="orge107e14">Why Linux?</h3>
<div class="outline-text-3" id="text-orge107e14">
<p>
Linux&#x2026;
</p>

<ul class="org-ul">
<li>&#x2026;is free, as in gratis</li>
<li>&#x2026;is free, as in the GPL licence allows you to do with it as you please (<a href="https://www.fsf.org/about/what-is-free-software">https://www.fsf.org/about/what-is-free-software</a>)</li>
<li>&#x2026;is open source</li>
<li>&#x2026;isn't controlled by one person or corporation</li>
<li>&#x2026;has software repositories that allow you to install software easily and securely</li>
<li>&#x2026;has a large and friendly community, which you can be part of, or not</li>
</ul>

<p>
The same can be said for most software that runs on Linux
</p>
</div>
</div>

<div id="outline-container-org0bcff96" class="outline-3">
<h3 id="org0bcff96">Requirements</h3>
<div class="outline-text-3" id="text-org0bcff96">
<ul class="org-ul">
<li>a PC that can smoothy run Orbiter with d3d9client on Windows</li>
<li>an empty partition or unpartitioned space to install Linux on</li>
<li>patience. Rome wasn't built in a day</li>
</ul>
</div>
</div>

<div id="outline-container-orgdad4d45" class="outline-3">
<h3 id="orgdad4d45">Which Linux distribution?</h3>
<div class="outline-text-3" id="text-orgdad4d45">
<p>
To run Orbiter on Linux you will need to install Linux. Linux comes in
"distributions", which are customized collections of Linux software.
You can typically do anything on any distribution, but some tasks may
be easier on some distributions than others.
</p>

<p>
I recommend Ubuntu, either
</p>

<ul class="org-ul">
<li>Ubuntu (<a href="http://www.ubuntu.com/">http://www.ubuntu.com/</a>), installs a "modern" "touch-pad compatible" desktop with lots of bells and whistles</li>
<li>Xubuntu (<a href="http://xubuntu.org/">http://xubuntu.org/</a>), installs a traditional desktop with menus and icons. Lighter on resources too</li>
</ul>

<p>
Personally, I prefer Xubuntu.
</p>

<p>
Whichever desktop you choose, you can install the other one (and many
more) later easily and switch between them, so it doesn't matter which
you start with.
</p>
</div>
</div>

<div id="outline-container-orga440aa8" class="outline-3">
<h3 id="orga440aa8">Installing Linux</h3>
<div class="outline-text-3" id="text-orga440aa8">
<p>
This is somewhat beyond the scope of this document, but the general
procedure is
</p>

<ul class="org-ul">
<li>download a Linux .iso image from the sites above</li>
<li>burn the image onto a CD/DVD (which is not the same as "copying" the .iso file onto the CD/DVD)</li>
<li>Back-up all important data just in case!</li>
<li>Set your BIOS to boot from CD-rom/DVD-rom first</li>
<li>Insert the CD/DVD and (re)boot your PC</li>
<li>Follow the on-screen instructions</li>
</ul>

<p>
For security and privacy I recommend encrypting your partitions by
telling the installer to set up "encrypted LVM"
</p>

<p>
If you have a newer PC with UEFI instead(?) of a BIOS, the process
should be similar.
</p>
</div>
</div>

<div id="outline-container-org9eef8ab" class="outline-3">
<h3 id="org9eef8ab">Linux 101</h3>
<div class="outline-text-3" id="text-org9eef8ab">
<p>
Navigating the graphical UIs in Linux should be intuitive enough, but
we'll be needing a terminal.
</p>

<p>
Find a terminal (there are many) in the applications menu of your
desktop and run it. It will open a window with <code>username@computername:~$</code>
in it. This is called a prompt. You type in commands and read their
output (if any). It might seem archaic but it's very powerful.
</p>
</div>
</div>

<div id="outline-container-orge9bb3dc" class="outline-3">
<h3 id="orge9bb3dc">Installing and configuring WINE</h3>
<div class="outline-text-3" id="text-orge9bb3dc">
<p>
Ubuntu's software repository has the stable branch of Wine, but we'll
be installing the latest beta.
</p>

<p>
Open a terminal and run the following commands (one by one):
</p>

<div class="org-src-container">
<pre class="src src-bash">sudo add-apt-repository ppa:ubuntu-wine/ppa
sudo apt-get update
sudo apt-get install wine1.7
</pre>
</div>

<p>
You now have Wine. Great.
</p>

<p>
Next run
</p>

<div class="org-src-container">
<pre class="src src-bash">winecfg
</pre>
</div>

<p>
This will initialize Wine and open a configuration window. Set the
Windows version to Windows XP. Enable "Emulate a virtual desktop" and
set the resolution to something smaller than your screen resolution.
Check that you have sound working by clicking Test Sound. Press OK to
save and exit.
</p>

<p>
Next run
</p>

<div class="org-src-container">
<pre class="src src-bash">winetricks d3dx10 d3dx9_36 vcrun2005 corefonts
</pre>
</div>

<p>
This will download DirectX and msvc redistributables that you need to
run Orbiter (If only Windows was this convenient!)
</p>
</div>
</div>

<div id="outline-container-org17b3f97" class="outline-3">
<h3 id="org17b3f97">Installing Orbiter</h3>
<div class="outline-text-3" id="text-org17b3f97">
<p>
Download orbiter100830.zip from
<a href="http://www.orbiter-forum.com/download.php">http://www.orbiter-forum.com/download.php</a> and D3D9ClientR7.zip from
<a href="https://d3d9client.codeplex.com/">https://d3d9client.codeplex.com/</a>
</p>

<p>
Open a terminal and run
</p>

<div class="org-src-container">
<pre class="src src-bash">mkdir ~/.wine/drive_c/orbiter
<span style="color: #A6E22E;">cd</span> ~/.wine/drive_c/orbiter
cp ~/Downloads/*.zip ~/.wine/drive_c/orbiter
sudo apt-get install unzip
unzip orbiter100830.zip
unzip D3D9ClientR7.zip
</pre>
</div>

<p>
That's it.
</p>

<p>
Some explanation is in order so you know what's going on. <code>~</code> is a short
way of refering to your user directory, which will be <code>/home/username</code>.
Wine creates the <code>.wine</code> directory in your user directory to store
everything in. The dot <code>.</code> in <code>.wine</code> means it's a hidden directory, so it
won't be visible in your file manager unless you ask it to display
hidden files (they're hidden to avoid clutter). The Wine <code>C:\</code> drive is
stored completely in <code>~/.wine/drive_c/</code>, so when you access <code>C:\</code> in an
application running in Wine, that's where the files actually are.
</p>

<p>
The first command creates the directory <code>~/.wine/drive_c/orbiter</code>. The
second changes the current active directory to that directory. The
third copies any zips in <code>~/Downloads</code>, where firefox saves files, to the
orbiter directory. The fourth installs unzip. The fifth and sixth unzip
the orbiter and <code>d3d9client</code> zips.
</p>

<p>
To find out more what Linux commands do, use man, e.g.
</p>

<div class="org-src-container">
<pre class="src src-bash">man mkdir
</pre>
</div>
</div>
</div>

<div id="outline-container-org443d1e3" class="outline-3">
<h3 id="org443d1e3">Running Orbiter</h3>
<div class="outline-text-3" id="text-org443d1e3">
<p>
Open a terminal and run
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #A6E22E;">cd</span> ~/.wine/drive_c/orbiter
wine Orbiter_ng.exe
</pre>
</div>

<p>
click Modules, and click Expand all twice. Enable the D3D9Client
checkbox.
</p>

<p>
click Video, and switch to full screen
</p>

<p>
click Parameters, uncheck Focus follows mouse
</p>

<p>
click Scenario and pick something. Anything.
</p>

<p>
click Launch Orbiter
</p>

<p>
play!
</p>
</div>
</div>

<div id="outline-container-org0043575" class="outline-3">
<h3 id="org0043575">Refining the experience</h3>
<div class="outline-text-3" id="text-org0043575">
</div>
<div id="outline-container-org8cb1248" class="outline-4">
<h4 id="org8cb1248">More addons</h4>
<div class="outline-text-4" id="text-org8cb1248">
<p>
Installing Orbiter addons should be fairly easy. Simply move the zip
files to <code>~/.wine/drive_c/orbiter</code> and unzip them. Some MFD addons don't
seem to work in Wine, for example BurnTimeMFD. Oh well!
</p>
</div>
</div>

<div id="outline-container-org48cdf25" class="outline-4">
<h4 id="org48cdf25">autojump</h4>
<div class="outline-text-4" id="text-org48cdf25">
<p>
Since typing <code>~/.wine/drive_c/orbiter</code> can get tedious, I recommend
installing autojump (<code>apt-get install autojump</code>). Then run <code>j
~/.wine/drive_c/orbiter</code>. From now on, you can cd into this directory by
simply running <code>j orb</code>. This is a fantastic tool for navigating directory
trees!
</p>
</div>
</div>

<div id="outline-container-orge931755" class="outline-4">
<h4 id="orge931755">reverse-i-search</h4>
<div class="outline-text-4" id="text-orge931755">
<p>
Another way to save time typing is to press Ctrl-R and then type a few
letters of the command you want to run (that you've already run
before). Ctrl-R will search through your history and recommend the
closest it finds. Then simply press Enter to run it. For example, if
you last ran <code>wine Orbiter_ng.exe</code>, then Ctrl-R and typing will should
recommend that command.
</p>
</div>
</div>


<div id="outline-container-orgc204c18" class="outline-4">
<h4 id="orgc204c18">Backing up</h4>
<div class="outline-text-4" id="text-orgc204c18">
<p>
The entire Wine "Windows installation" is stored in <code>~/.wine</code>. This makes
it very easy to move between computers. Simply copy the entire
directory!
</p>
</div>
</div>

<div id="outline-container-org9a7e19b" class="outline-4">
<h4 id="org9a7e19b">Different WINEPREFIX</h4>
<div class="outline-text-4" id="text-org9a7e19b">
<p>
It is possible to install Wine elsewhere than <code>~/.wine</code> by setting
<code>WINEPREFIX</code>, e.g.
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #FF84C9;">WINEPREFIX</span>=/home/yourusername/wine-orbiter winecfg
</pre>
</div>

<p>
will setup wine in <code>~/wine-orbiter</code> instead of <code>~/.wine</code>. This allows you
to have seperate instances of "Windows" for every game, with different
settings.
</p>
</div>
</div>
</div>

<div id="outline-container-org26fa62f" class="outline-3">
<h3 id="org26fa62f">That's all!</h3>
<div class="outline-text-3" id="text-org26fa62f">
<p>
If you have any questions or suggestions email me!
</p>
</div>
</div>
</div>



<div id="outline-container-org81d2a92" class="outline-2">
<h2 id="org81d2a92">HOWTO: take screenshots of (windowed) wine games</h2>
<div class="outline-text-2" id="text-org81d2a92">
<p>
Install imagemagick
</p>

<div class="org-src-container">
<pre class="src src-bash">apt-get install imagemagick <span style="color: #66D9EF;">(</span>or equivalent<span style="color: #66D9EF;">)</span>
</pre>
</div>

<p>
Create a directory to hold the screenshots
</p>

<div class="org-src-container">
<pre class="src src-bash">mkdir ~/wine-scr
</pre>
</div>

<p>
Open a text editor and write
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #646F84;">#</span><span style="color: #646F84;">!/bin/</span><span style="color: #66D9EF;">bash</span>

/usr/bin/import -window <span style="color: #C1CAFF;">"Default - Wine Desktop"</span> ~/wine-scr/wine-$<span style="color: #66D9EF;">(</span><span style="color: #fa8072;">date +%s</span><span style="color: #66D9EF;">)</span>.png
</pre>
</div>

<p>
You may have to edit the wine (^^^) window title if yours is different
</p>

<p>
Save the file as <code>~/wine-scr/take-scr.sh</code>
</p>

<p>
Mark it executable
</p>

<div class="org-src-container">
<pre class="src src-bash">chmod u+x ~/wine-scr/take-scr.sh
</pre>
</div>

<p>
Edit your window manager preferences to bind a key (I use caps lock) to run <code>~/wine-scr/take-scr.sh</code>
</p>

<p>
Note: your window manager probably won't parse ~ properly. Replace ~ with the explicit path, i.e. <code>/home/yourusername</code>
</p>

<p>
Run wine and take a screenshot to test it!
</p>
</div>
</div>



<div id="outline-container-orgf5a4d0d" class="outline-2">
<h2 id="orgf5a4d0d">A More Open Space Program</h2>
<div class="outline-text-2" id="text-orgf5a4d0d">
<p>
2016-09-18
</p>

<p>
I spent some more time working on Open Space Program.
</p>

<p>
There's now a sun, a colorful planet and a moon with their own rotational and inertial reference frames and spheres of influence, a GUI, fuel consumption, etc.
</p>


<div id="org0f4ccb7" class="figure">
<p><img src="https://i.imgur.com/HM02Gd7.png" alt="HM02Gd7.png" />
</p>
<p><span class="figure-number">Figure 2: </span>OSP screenshot in orbit</p>
</div>
</div>
</div>


<div id="outline-container-org216982d" class="outline-2">
<h2 id="org216982d">2.7 Kelvin Events: An Illustrated Primer</h2>
<div class="outline-text-2" id="text-org216982d">
<p>
2016-05-08
</p>

<p>
Information about observable events in 2.7 Kelvin propagate at the speed of light. What does this mean in practice?
</p>

<p>
It may be best to look at an example:
</p>


<div id="org6fee46e" class="figure">
<p><img src="https://i.imgur.com/jcQ5o8v.png" alt="jcQ5o8v.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Circles showing information travelling</p>
</div>

<p>
Fleet departures and arrivals are observable events.
</p>

<p>
In the above, the player is at Epsilon Eridani and has just sent a fleet from Epsilon Eridani to Tau Ceti at 0.75c. Since they're at the same system, they saw the departure event (the outer circle) immediately. On the other hand the arrival event (the inner circle) hasn't reached them yet, so they don't know if the fleet has arrived successfully (but we can see it has).
</p>

<p>
The other observer sits far away at Ross 154. Neither of the events has reached them yet - from their perspective, the fleet hasn't left yet.
</p>

<p>
In the game, each observer keeps their own copy of fleets and stars (and everything else that I might add). When an event reaches them they update their knowledge of the event's source.
</p>
</div>
</div>

<div id="outline-container-org8772bee" class="outline-2">
<h2 id="org8772bee">New experiment: 2.7 Kelvin</h2>
<div class="outline-text-2" id="text-org8772bee">
<p>
2016-05-03
</p>

<p>
I've been working on a new project: a RTwP space strategy game called 2.7 Kelvin.
</p>

<p>
In 2.7 Kelvin, information travels at the speed of light. News from other star systems takes years to arrive, and so do your orders to other systems. There's no stealth in space, but when you look at a star 20 light years away you're seeing the situation as it was 20 years ago. The further the seat of your government is from the action the more distorted your perspective is.
</p>


<div id="org209e80f" class="figure">
<p><img src="https://i.imgur.com/ovuunem.png" alt="ovuunem.png" />
</p>
<p><span class="figure-number">Figure 4: </span>Screenshot of 2.7 Kelvin</p>
</div>


<div id="org734d00f" class="figure">
<p><img src="https://i.imgur.com/tAqm1uB.png" alt="tAqm1uB.png" />
</p>
<p><span class="figure-number">Figure 5: </span>Screenshot showing 2.7 Kelvin UI</p>
</div>
</div>
</div>

<div id="outline-container-orgcd31e7c" class="outline-2">
<h2 id="orgcd31e7c">Fallout 4 Review</h2>
<div class="outline-text-2" id="text-orgcd31e7c">
<p>
2016-04-14
</p>

<p>
The Fallout series was started at the end of the previous millennium, in that magical time when isometric role-playing games flourished. The gameplay of Fallout consisted of very basic turn-based combat and a likewise basic choose-your-own-adventure-style plot that unfolded mostly through dialogues where the player navigated scripted situations. Fallout's main draw was its post-apocalyptic aesthetic based on what the developers thought 1960s Americans imagined the future might be like. The game presented a harsh future full of hard-boiled characters and desperate situations, and it became a classic.
</p>

<p>
But Fallout 4 isn't part of that series. As the original publisher went bankrupt, the intellectual monopoly was sold to Bethesda Softworks. Bethesda was in the business of making first-person open-world games, and so Fallout 3 came out in 2008 as a first-person open-world game. It was liked and sold well, and it became one of their main series.
</p>

<p>
Fallout 3 was followed by Fallout: New Vegas, but this time it was developed by Obsidian Entertainment, a company with a connection to the original Fallout developers. New Vegas was liked, and it's generally thought of as having a better story and a more logical world map. The developers also made an effort to re-add the CYOA elements to dialogues similar to the original.
</p>

<p>
We now come to Fallout 4, released toward the end of 2015. Some things never change and it is, once again, an open-world first-person game. Unsurprisingly it's the best looking one so far from Bethesda, with a vivid, cluttered world and often strikingly pretty lighting. Taking place in a compressed version of Boston and its surroundings, Fallout 4 features large and complex urban areas, most of which are part of the main map, which allows for more freedom of movement than previous games and a more "3D" feel to the environments (other than Morrowind).
</p>

<p>
The game itself begins in the past, with players experiencing a short slice of idilic, sheltered life before the nuclear war. The player and their spouse are then frozen in a vault, awakened only to witness their child stolen and their spouse murdered, and then released from the vault after an unspecified time of being frozen again. The vault serves as a short tutorial environment, and the player is then a pointed in the general direction of the main quest, but is free to ignore it.
</p>

<p>
Fallout 4 learns from New Vegas and features factions and asks the player to pick sides in their conflicts. The factions sometimes feel contrived, but the arguments and advantages offered are interesting and, assuming the world drew you in, the ultimate choice is a difficult one.
</p>

<p>
Much has been said, often in tones comical to a disinterested observer, about the changes to the dialogue and skill systems. Fallout 4 does not have skills any more - instead those have been merged with the perks system. In practice it works well however, and it fixes important issues that Fallout has had since the beginning. The dialogue system is a stranger beast. It almost always has four options (with a fifth implicit one because you can now simply walk away at any time). Again, in practice it works well, and it feels more natural than previous games, but it must be said that at times the sacred number 4 seems too little, or too much.
</p>

<p>
What Fallout 4 takes away, it compensates by adding other things. One addition is that of settlement building that the player can build at designated areas across the map. These settlements attract NPCs who must be provided with life's necessities and protected against attacks. In return, they work and pass the fruit of their labors to you. At settlement workshops the player can also extensively modify weapons and armors, the latter of which now come in many pieces instead of whole suits. After release, Bethesda also added a new game mode that introduced hunger, hydration, sleep deprivation, diseases, and disabled map travel and restricted saving to beds. These changes mark another shift away from tight scripting and into procedural and sandbox gameplay, and this is not a bad thing.
</p>

<p>
Fallout 4 makes many changes to the gameplay that improve quality of life. The addition of sprinting means enemies can be made to be faster and more difficult to get away from, a reworked critical hits system removes pointless randomness, the addition of durability and fuel to power armor means you won't want to wear it all of the time and randomly spawning legendary enemies add variety to combat encounters to name a few changes. Since Fallout 4 is a long game, these improvements are very welcome. Overall it is more difficult and dynamic at all character levels than previous Fallouts.
</p>
</div>
</div>

<div id="outline-container-org8a1e417" class="outline-2">
<h2 id="org8a1e417">Open Space Program attempt #1</h2>
<div class="outline-text-2" id="text-org8a1e417">
<p>
2016-04-11
</p>

<p>
Ever since I first played Orbiter years ago I had a vague wish to make my own space sim - and even more so - an open source platform that others could build on instead of being limited to making mods for proprietary engines.
</p>

<p>
Well, in March I made a few exploratory steps!
</p>


<div id="org7c0eebe" class="figure">
<p><img src="https://i.imgur.com/qG3uTMg.png" alt="qG3uTMg.png" />
</p>
<p><span class="figure-number">Figure 6: </span>Screenshot of very early space ship</p>
</div>


<div id="org52aa499" class="figure">
<p><img src="https://i.imgur.com/CnAvQWE.png" alt="CnAvQWE.png" />
</p>
<p><span class="figure-number">Figure 7: </span>Screenshot of very early planet surface</p>
</div>


<div id="org1cf09a7" class="figure">
<p><img src="https://i.imgur.com/ZjgJkh3.png" alt="ZjgJkh3.png" />
</p>
<p><span class="figure-number">Figure 8: </span>Screenshot of shaded planet</p>
</div>

<p>
I used the Bullet physics library and OpenGL.
</p>

<p>
It was pretty fun, but I have to admit defeat for now. My development environment, which currently involves writing and running programs over a network (think vpn) just isn't suited for making 3D games.
</p>

<p>
I will have to come back in better conditions.
</p>
</div>
</div>

<div id="outline-container-orga5e5716" class="outline-2">
<h2 id="orga5e5716">Avarice Inc. status</h2>
<div class="outline-text-2" id="text-orga5e5716">
<p>
2016-04-11
</p>

<p>
I finished working on Avarice Inc. over a month ago, but I never got to writing about it.
</p>

<p>
It's mostly finished. I added more stuff than I initially intended to, including a map editor, and I did it faster than I thought I would - in under two weeks.
</p>

<p>
What's missing? I added an option menu button, but it doesn't do anything. (the game can be configured through a config file).
</p>

<p>
The AI isn't as good as I would like.
</p>

<p>
Despite having simple mechanics, that the map can change quickly and drastically made it difficult to write AI that plays well in the long term.
</p>

<p>
It's possible to design a map where you can press End Turn repeatedly and win because the AI destoyed its land and failed to get away in time.
</p>

<p>
Nevertheless I'm reasonably pleased with how it turned out.
</p>
</div>
</div>

<div id="outline-container-orgb2d1d3f" class="outline-2">
<h2 id="orgb2d1d3f">Avarice Inc.</h2>
<div class="outline-text-2" id="text-orgb2d1d3f">
<p>
2016-02-25
</p>

<p>
For the past couple of days I've been working on a new game:
</p>


<div id="org3c19448" class="figure">
<p><img src="https://i.imgur.com/Ly7L2RZ.png" alt="Ly7L2RZ.png" />
</p>
<p><span class="figure-number">Figure 9: </span>Screenshot of Avarice Inc.</p>
</div>
</div>
</div>

<div id="outline-container-org19b70a9" class="outline-2">
<h2 id="org19b70a9">Project X 1.0 and lessons learned</h2>
<div class="outline-text-2" id="text-org19b70a9">
<p>
2015-10-11
</p>

<p>
I've released version 1.0 of Project X.
</p>

<p>
I have no plans to work on it now, and it's time to wrap things up and see what can be learned from the experience.
</p>
</div>

<div id="outline-container-orgdb2b025" class="outline-3">
<h3 id="orgdb2b025">Status</h3>
<div class="outline-text-3" id="text-orgdb2b025">
<p>
Overall I'm pretty happy with how it ended up. It doesn't have the content of a full game, but from a programming standpoint, which was my primary interest, it's got most of the things a game needs.
</p>
</div>
</div>

<div id="outline-container-org8d372f4" class="outline-3">
<h3 id="org8d372f4">History</h3>
<div class="outline-text-3" id="text-org8d372f4">
<p>
I started working on it in February almost immediately after getting the idea about making an open source Neo-scavenger. I had not played Neo-scavenger before but I'd watched a couple of videos of people playing it, and it seemed interesting.
</p>

<p>
Initially I hoped that I would find collaborators to share the programming work with, but I ended up doing it all myself, which was fine too. I did get some good feedback on memory management in the first few days though.
</p>
</div>
</div>

<div id="outline-container-org65c1ebf" class="outline-3">
<h3 id="org65c1ebf">Lessons learned</h3>
<div class="outline-text-3" id="text-org65c1ebf">
<p>
Making a game from the beginning is a lot more work than contributing to an existing one
There's a terrible sense of freedom involved in having to architect it all yourself. Endless ways of doing it, endless ways of messing things up and having headaches later fixing it.
</p>
</div>

<div id="outline-container-orgbcd5041" class="outline-4">
<h4 id="orgbcd5041">Graphics are difficult to make</h4>
<div class="outline-text-4" id="text-orgbcd5041">
<p>
Although the game's pretty simple, it does require a lot of sprites. Tiles, characters, items, buttons, etc. These were almost painfully tedious for me to try to make.
</p>

<p>
Asking others to work for free isn't great either.
</p>

<p>
This was the biggest block to development, as I often lacked the graphics for the features I wanted to add.
</p>

<p>
If I make another game I will either base it around existing free graphics, or I will use only abstract geometric shapes.
</p>
</div>
</div>

<div id="outline-container-orga5c6913" class="outline-4">
<h4 id="orga5c6913">Writing isn't quite trivial</h4>
<div class="outline-text-4" id="text-orga5c6913">
<p>
This is/was a personal bias of mine I suppose. I thought writing content like quests and background would be, well, "automatic".
</p>

<p>
Nope. In the end I made one quest, and the game still doesn't have a background story.
</p>
</div>
</div>

<div id="outline-container-orgc9d3ec9" class="outline-4">
<h4 id="orgc9d3ec9">It's difficult to get feedback</h4>
<div class="outline-text-4" id="text-orgc9d3ec9">
<p>
I got some feedback, but not as much as I would have hoped for ideally.
</p>

<p>
People who play video games want complete games, and people who develop video games have their own that they're working on.
</p>

<p>
Understandably, nobody wants to help test half/quarter done games.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org9ae4888" class="outline-2">
<h2 id="org9ae4888">Moving from devio.us</h2>
<div class="outline-text-2" id="text-org9ae4888">
<p>
2015-09-23
</p>

<p>
I used to host my site on devio.us. Unfortunately they decided to block all bots. Since I'd like it to be indexed by search engines I've decided to move it here. The three articles remain in their original form, at least until bloggen.py can auto-generate a table of contents.
</p>
</div>
</div>

<div id="outline-container-org6177746" class="outline-2">
<h2 id="org6177746">New blog</h2>
<div class="outline-text-2" id="text-org6177746">
<p>
2015-09-16
</p>

<p>
I have a new blog!
</p>

<p>
I wrote my own "static site generator" after being frustrated by the complexity of the ones I tried to use.
</p>

<p>
It's only 150 lines of Python.
</p>

<p>
It uses a tag soup to extract some meta data from the post file, sorts the posts by date, and creates an index with pages.
</p>

<p>
I previously used Hakyll, but I couldn't figure out how to add pages. I spent less time making this from scratch than I did trying to use Hakyll!
</p>

<p>
Additionally my code won't change under me. This was a problem when I tried to use Hakyll, because other people had already solved the problems I was facing, but their code didn't work any more because I was using a somewhat newer version.
</p>

<p>
And of course, I don't have to install gigabytes of Haskell packages&#x2026;
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Denis Volk</p>
<p class="date">Created: 2022-11-01 Tue 20:58</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
